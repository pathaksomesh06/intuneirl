---
title: "The Magic of ObliterationBehavior"
date: 2023-06-10T18:10:38"
draft: false
tags: []
---

<p>A new feature in the most recent Intune service release (2305) is the ability to use the Wipe device command for macOS devices. Additionally, we can also configure the <strong>Obliteration Behavior</strong> setting as part of the <strong>Wipe</strong> action. This new key allows you to control the wipe fallback behavior on Macs that have Apple Silicon or the T2 Security Chip.</p><p>The updates in the service release were quite short and simple. Let me help you understand how this setting works and why it's important.</p><h2 id="what-is-obliterationbehaviour">What is ObliterationBehaviour?</h2><p>Imagine a macOS world where developers have granular control over the data deletion process. That's where <code>ObliterationBehavior</code> comes in. </p><p><code>ObliterationBehavior</code> can be interpreted as a behavior trait of macOS to handle file or data deletion processes more effectively. It’s a set of instructions, coded into the macOS kernel, that dictates how data is deleted and overwritten when the system is prompted by a user or a remote management command.</p><h2 id="why-is-obliterationbehavior-important">Why is ObliterationBehavior important?</h2><p><code>ObliterationBehavior</code> is important for several reasons, foremost among being security and privacy issues. Usually, the data isn't immediately wiped from the disk when a file is deleted from a system. Instead, the system merely marks the space that the file occupied as available for future use. Until that space is overwritten by new data, the original file can potentially be recovered using special software.</p><p>As an IT admin, you can control how data deletion is handled with ObliterationBehavior, making sure that when a file is removed, it truly gets obliterated—hence the name. The process practically renders the data unrecoverable and gives users an extra layer of security.</p><h2 id="whats-new-with-obliteationbehavior-with-macos">What's new with ObliteationBehavior with macOS?</h2><p>iOS and iPadOS both had the ability to erase all content and settings without requiring a full reinstall of the OS. Macs, on the other hand, have not fared as well. Wiping out all user data and apps from a Mac has been a time-consuming task that required a reinstallation of macOS. But only with Macs with Apple silicon or with the Apple T2 Security Chip using macOS 12.0.1 or later which allows a local administrator—or, if enrolled in Intune, you can simply trigger Erase All Content and Settings command exactly similar to the behavior permitted on iPhone, iPad, Apple TV, and Apple Watch devices.</p><p>The process makes handing over a Mac to another user simpler from the user's standpoint. All settings, data, and programs can be securely erased by selecting Erase All Contents and Settings from the System Preferences menu. This might really come in handy for administrators when it comes to offboarding users and confirming enrollment operations.</p><h2 id="understanding-erase-all-content-and-settings">Understanding "Erase All Content and Settings"</h2><p>"Erase All Content and Settings" commonly referred to as <u>EACS</u> is a feature provided by Apple that allows administrators to remotely wipe data from managed devices, restoring them to their factory settings. It is particularly useful in scenarios where a device needs to be repurposed, sold, or returned, ensuring that all sensitive information is completely removed. Benefits and Significance of EACS:</p><ul><li>Data security</li><li>Compliance &amp; privacy regulations</li><li>Device repurposing and recycling</li><li>Lost or compromised devices</li></ul><p>On the device, erasing (or <em><em>wiping</em></em>) <em>obliterates</em> all the keys in effaceable storage and renders all user data cryptographically inaccessible.</p><h2 id="how-does-obliterationbehaviour-work-with-macos">How does ObliterationBehaviour Work With macOS</h2><p>To begin with, you can now initiate a remote wipe command through Intune admin center, regardless of the Apple device you want to wipe (whether it is iOS, iPadOS, or macOS-based).</p><p>Using mobile device management solutions like Intune, iCloud, or Microsoft Exchange ActiveSync, you can initiate a remote wipe command on any Apple device, including iPhone, iPad, and Mac. The Apple device sends an acknowledgment back to Intune after receiving a remote wipe instruction and then carries out the wipe.</p><p>Example of this request:</p><pre><code class="language-plist">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Command&lt;/key&gt;
    &lt;dict&gt;
        &lt;key&gt;DisallowProximitySetup&lt;/key&gt;
        &lt;false/&gt;
        &lt;key&gt;PreserveDataPlan&lt;/key&gt;
        &lt;true/&gt;
        &lt;key&gt;RequestType&lt;/key&gt;
        &lt;string&gt;EraseDevice&lt;/string&gt;
    &lt;/dict&gt;
    &lt;key&gt;CommandUUID&lt;/key&gt;
    &lt;string&gt;EraseDevice&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</code></pre><p>Response from device to MDM:</p><pre><code class="language-plist">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;CommandUUID&lt;/key&gt;
    &lt;string&gt;EraseDevice&lt;/string&gt;
    &lt;key&gt;Status&lt;/key&gt;
    &lt;string&gt;Acknowledged&lt;/string&gt;
    &lt;key&gt;UDID&lt;/key&gt;
    &lt;string&gt;00008020-000915083C80012E&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</code></pre><p>The device sends back an acknowledgment to the MDM platform and the wipe is performed. Everything seems to be in order here; the device gets the wipe command and it is wiped and then it sends back the acknowledgment also. But it's never that simple with Mac. </p><p>The macOS operating system has some quirks. It will fall back to the behavior of macOS 11, which is "obliteration," and necessitate a time-consuming reinstall of macOS before the hardware can be used if an EraseDevice command is sent to a Mac that does not support it.</p><h2 id="the-fall-back-plan">The Fall Back Plan</h2><p>The default behavior and the ObliterationBehavior command option configured in Intune will govern the system's actions in the case that EACS does not complete as planned. During EACS, there is a preflight conducted on the system, and that preflight can succeed, or it can fail, which will conduct the assigned <code>ObliterationBehavior</code>. The following values define the device’s fallback behavior:</p><ul><li><u><em>DoNotObliterate</em></u>: If EACS preflight fails, the device responds to the server with an <code>Error</code> status and doesn’t attempt to erase itself. If EACS preflight succeeds but EACS fails, then the device doesn’t attempt to erase itself.</li><li><em><u>ObliterateWithWarning</u></em>: If EACS preflight fails, the device responds with  <code>Acknowledged</code> status and then attempts to erase itself. If EACS preflight succeeds but EACS fails, then the device attempts to erase itself.</li><li><u><em>Always:</em></u> The system doesn’t attempt EACS. T2 and later devices always obliterate.</li><li><em><u>Default:</u></em> If EACS preflight fails, the device responds to the server with  <code>Error</code> status and then attempts to erase itself. If EACS preflight succeeds but EACS fails, then the device attempts to erase itself.</li></ul><p>The screenshot below shows the new feature with OblietrationBehavior that you have to choose while initiating a wipe command to macOS devices.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/06/image-3.png" class="kg-image" alt loading="lazy" width="1391" height="876" srcset="__GHOST_URL__/content/images/size/w600/2023/06/image-3.png 600w, __GHOST_URL__/content/images/size/w1000/2023/06/image-3.png 1000w, __GHOST_URL__/content/images/2023/06/image-3.png 1391w" sizes="(min-width: 720px) 720px"><figcaption>Obliteration Behavior Keys</figcaption></figure><h2 id="conclusion">Conclusion</h2><p>With the latest service release of Microsoft Intune, you now have the option to configure <code>ObliterationBehavior</code> for more enhanced control and security over data managed on your corporate Mac devices. This would mean that when you as an Intune admin initiate the wipe command for the corporate enrolled Macs, the configuration defined in Intune would dictate the level of obliteration. This feature is incredibly useful in scenarios requiring high levels of data security and regulatory compliance.</p><p>Stay tuned for more exciting journeys into the realm of macOS management, and until then, keep learning, exploring, and pushing the boundaries of what's possible. #intuneinspired #alwaysintune</p>