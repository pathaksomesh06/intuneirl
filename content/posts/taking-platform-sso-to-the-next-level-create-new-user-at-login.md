---
title: "Taking Platform SSO to the Next Level: Create New Users At Login"
date: 2023-12-30T22:41:37"
draft: false
tags: []
---

<p>In my previous exploration, we delved deep into the world of Apple Identity Services and Platform Single Sign-On (PSSO). If you haven't had the chance to read it yet, I highly recommend starting there for a solid foundation:</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="__GHOST_URL__/apple-identity-services-sso/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">The Apple Connect: Bridging Identity Services with SSO</div><div class="kg-bookmark-description">Apple’s integration of IdP with SSO is a game-changer in digital identity and access management. This innovative merge offers a seamless, secure user experience. It simplifies authentication across various services, enhancing productivity in enterprise environments.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="__GHOST_URL__/content/images/size/w256h256/2023/01/admin-ajax.png" alt=""><span class="kg-bookmark-author">Intune - In Real Life</span><span class="kg-bookmark-publisher">Somesh Pathak</span></div></div><div class="kg-bookmark-thumbnail"><img src="__GHOST_URL__/content/images/2023/12/_47a8e4a5-bffb-4231-b18b-f919971d510a-1-1.jpg" alt=""></div></a></figure><p>Building on that knowledge, this new post takes a crucial step forward. Platform Single Sign-On (SSO) on macOS has evolved, offering groundbreaking capabilities that are particularly beneficial for enterprises utilizing shared devices. This advancement enhances the integration of corporate identities into the macOS ecosystem, streamlining both the user experience and device management. Here are some key features and their implications:</p><p>So, let's dive into the transformative world of macOS user roles and privileges, redefined by platform SSO.</p><hr><h3 id="the-core-challenges"><strong>The Core Challenges</strong></h3><ul><li><strong>Admin Rights:</strong> A fundamental challenge in integrating Macs into enterprise environments has been the automatic assignment of full administrative rights to the primary user who enrolls the device. This situation presents a significant security risk, as it grants more control than necessary for most users. In a corporate setting, where control and security are paramount, this default setting can lead to a range of issues, from accidental system misconfigurations to potential internal security breaches. </li><li><strong>Comparative Analysis with Windows Platforms: </strong>Contrasting this with the Windows platform, where user privilege management is more granular and controlled, highlights the disparity. In Windows environments, IT administrators typically have the flexibility to assign varying levels of access rights to different users. This system allows for a more nuanced approach to security and user management, where users receive only the permissions necessary for their role. This level of control is crucial in enterprise settings, as it reduces the risk of security incidents and ensures a more stable and manageable IT environment.</li></ul><hr><h3 id="but-we-always-had-workarounds"><strong>But We Always Had Workarounds</strong></h3><p>Before the advent of more sophisticated solutions like Platform SSO, IT administrators managing Macs in enterprise environments had to rely on various workarounds to mitigate the risks associated with primary users gaining full administrative rights. These workarounds, while creative, often came with their own set of limitations and were only partially effective.</p><ol><li><strong>User Role Restructuring</strong>: One common approach was to manually change the primary user's role from an administrator to a standard user after the initial setup. </li><li><strong>Scripted Solutions</strong>: Some MDM admins turned to scripting. Scripts were written and deployed to automatically adjust user privileges post-enrollment. While this automated part of the process, it still didn't offer the granularity and flexibility needed for diverse enterprise environments.</li><li><strong>Third-party Management Tools</strong>: Another strategy involved the use of third-party Mac management tools. These tools provided more control over user accounts and privileges but often at the cost of additional complexity and expense. They also introduced a dependency on external software, which might not always align with the organization's IT policies or standards.</li><li><strong>Policy Enforcement via Network Controls</strong>: In some cases, network-level controls and policies were implemented to restrict what administrative users could do, especially regarding network resources and critical systems. This approach was more about containment than prevention, as it did nothing to change the user's actual privileges on the Mac itself.</li></ol><p>Each of these workarounds had its drawbacks. They were often seen as stop-gap solutions – measures that could reduce risks but not eliminate them. They also added layers of complexity and management overhead, detracting from the user experience and efficiency.</p><hr><h3 id="alright-enlighten-me"><strong>Alright! Enlighten Me</strong></h3><p>In my previous article, we discussed and explored how platform SSO presents a more integrated and streamlined approach, overcoming many of these historical challenges. The steps are in the link below:</p><p><strong>Step-by-Step Guide on Setting Up Platform SSO</strong></p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="__GHOST_URL__/apple-identity-services-sso/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">The Apple Connect: Bridging Identity Services with SSO</div><div class="kg-bookmark-description">Apple’s integration of IdP with SSO is a game-changer in digital identity and access management. This innovative merge offers a seamless, secure user experience. It simplifies authentication across various services, enhancing productivity in enterprise environments.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="__GHOST_URL__/content/images/size/w256h256/2023/01/admin-ajax.png" alt=""><span class="kg-bookmark-author">Intune - In Real Life</span><span class="kg-bookmark-publisher">Somesh Pathak</span></div></div><div class="kg-bookmark-thumbnail"><img src="__GHOST_URL__/content/images/2023/12/_47a8e4a5-bffb-4231-b18b-f919971d510a-1-1.jpg" alt=""></div></a></figure><hr><h3 id="the-next-level-on-demand-local-account-creation"><strong>The Next Level: On-Demand Local Account Creation</strong></h3><p>Perhaps the most significant advancement is the ability of Platform SSO to support the on-demand creation of local accounts at the login window. When a new user authenticates using credentials from their organization's IdP, macOS can now automatically create a new local user account. This feature is a game-changer for organizations that use shared devices, as it:</p><ul><li><strong>Enhances Security</strong>: Each user accesses the device with their unique credentials, ensuring that activity and access are individualized and traceable.</li><li><strong>Improves User Experience</strong>: New users can quickly get started without needing pre-configured accounts, making it ideal for environments where device sharing is common.</li><li><strong>Reduces IT Overhead</strong>: Automating the user creation process significantly reduces the workload on IT teams, eliminating the need for manual account setup for each new user.</li></ul><p>To achieve this, certain requirements need to be in place for the local account creation to happen.</p><ol><li><strong>UseSharedDeviceKeys</strong>: It's enabled by using a shared device key that allows the device to maintain a trusted connection to the Entra ID, independent of a specific user.</li><li><strong>Connectivity with the Identity Provider</strong>The Mac must be able to establish a connection with your Entra ID. This connection is vital for authenticating user credentials and ensuring that the user is authorized to access the device.</li><li><strong>Device State - Login Window with FileVault Unlocked</strong>: The device needs to be at the login window, and FileVault should be unlocked. This state ensures that the device is secure but ready to set up a new user account upon successful authentication.</li><li><strong>MDM Support for Bootstrap Tokens</strong>: The MDM system must support Bootstrap Tokens. Bootstrap Tokens play a critical role in enabling a seamless and secure user experience, especially in scenarios involving the creation of new user accounts on macOS devices.</li><li><strong>User Authentication</strong>: With these conditions met, users can then authenticate using their Entra ID username and password, or a SmartCard. </li><li><strong>Assignment of User Permissions</strong>: Post-authentication, user permissions are assigned based on Identity Provider groups. </li><li><strong>Defining Access Levels through MDM Profiles</strong>: Intune profiles profile plays a pivotal role in defining the access level of the newly created account. It can specify whether the user receives standard user permissions, administrator privileges, or permissions based on their group membership in Entra ID.</li></ol><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/12/image-18.png" class="kg-image" alt="" loading="lazy" width="1414" height="892" srcset="__GHOST_URL__/content/images/size/w600/2023/12/image-18.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/image-18.png 1000w, __GHOST_URL__/content/images/2023/12/image-18.png 1414w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Local Account Creation with PSSO</span></figcaption></figure><hr><h3 id="demo-time"><strong>Demo Time</strong></h3><ul><li>Allow network users to log in at login window<strong> </strong>using configuration profile from Intune:</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.36.39.png" class="kg-image" alt="" loading="lazy" width="1430" height="1166" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-00.36.39.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-00.36.39.png 1000w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.36.39.png 1430w" sizes="(min-width: 720px) 720px"></figure><ul><li>Login Screen is now enabled for allowing network users to log in to the Mac.</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.38.48.png" class="kg-image" alt="" loading="lazy" width="2000" height="1668" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-00.38.48.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-00.38.48.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-00.38.48.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.38.48.png 2000w" sizes="(min-width: 720px) 720px"></figure><ul><li>Currently there is only one user account available in Users &amp; Groups<br></li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.54.05.png" class="kg-image" alt="" loading="lazy" width="1434" height="1162" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-00.54.05.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-00.54.05.png 1000w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.54.05.png 1434w" sizes="(min-width: 720px) 720px"></figure><ul><li>Current user logout and new user attempts log-in</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.59.08-1.png" class="kg-image" alt="" loading="lazy" width="1434" height="1162" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-00.59.08-1.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-00.59.08-1.png 1000w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-00.59.08-1.png 1434w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.00.56.png" class="kg-image" alt="" loading="lazy" width="1688" height="1692" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-01.00.56.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-01.00.56.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-01.00.56.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.00.56.png 1688w" sizes="(min-width: 720px) 720px"></figure><p>("Tanush" is my son's name 😊)</p><ul><li>Login successful and Setup Assistant is launched</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.02.39.png" class="kg-image" alt="" loading="lazy" width="1710" height="1734" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-01.02.39.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-01.02.39.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-01.02.39.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.02.39.png 1710w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.03.44.png" class="kg-image" alt="" loading="lazy" width="1710" height="1588" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-01.03.44.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-01.03.44.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-01.03.44.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.03.44.png 1710w" sizes="(min-width: 720px) 720px"></figure><ul><li>User needs to go through Setup Assistant screens. There is no option to bypass this.</li><li>And once the device is released from Setup Assistant screens, the Platform SSO kicks in and user is prompted the register the device.</li></ul><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.05.00.png" class="kg-image" alt="" loading="lazy" width="2000" height="1024" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-01.05.00.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-01.05.00.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-01.05.00.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.05.00.png 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Device Registration</span></figcaption></figure><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/image-19.png" class="kg-image" alt="" loading="lazy" width="1966" height="1376" srcset="__GHOST_URL__/content/images/size/w600/2023/12/image-19.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/image-19.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/image-19.png 1600w, __GHOST_URL__/content/images/2023/12/image-19.png 1966w" sizes="(min-width: 720px) 720px"></figure><ul><li>Next, User registration</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/image-20.png" class="kg-image" alt="" loading="lazy" width="1966" height="1376" srcset="__GHOST_URL__/content/images/size/w600/2023/12/image-20.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/image-20.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/image-20.png 1600w, __GHOST_URL__/content/images/2023/12/image-20.png 1966w" sizes="(min-width: 720px) 720px"></figure><ul><li>Based on Authorization Group in Settings Catalog, user is created as "<strong>Standard User"</strong></li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.10.01.png" class="kg-image" alt="" loading="lazy" width="1966" height="1376" srcset="__GHOST_URL__/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-01.10.01.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-01.10.01.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-01.10.01.png 1600w, __GHOST_URL__/content/images/2023/12/Screenshot-2023-12-31-at-01.10.01.png 1966w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/image-21.png" class="kg-image" alt="" loading="lazy" width="1966" height="1376" srcset="__GHOST_URL__/content/images/size/w600/2023/12/image-21.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/image-21.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/image-21.png 1600w, __GHOST_URL__/content/images/2023/12/image-21.png 1966w" sizes="(min-width: 720px) 720px"></figure><ul><li>Platform SSO token</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/12/image-22.png" class="kg-image" alt="" loading="lazy" width="1966" height="1376" srcset="__GHOST_URL__/content/images/size/w600/2023/12/image-22.png 600w, __GHOST_URL__/content/images/size/w1000/2023/12/image-22.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/12/image-22.png 1600w, __GHOST_URL__/content/images/2023/12/image-22.png 1966w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/93R5xpah-Z0?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" title="Create User At Login - PSSO macOS"></iframe></figure><hr><h3 id="conclusion"><strong>Conclusion</strong></h3><p>The enhancements in Platform SSO for macOS, particularly for shared devices, mark a significant stride in enterprise technology. By enabling on-demand local account creation at login, Apple addresses a critical need for tighter security and streamlined user management. This feature not only simplifies the Mac integration into enterprise environments but also underscores the commitment to evolving user and administrative needs.</p><p>As we wrap up this year, I'm excited about these developments and look forward to seeing how they'll improve our workflows and security.</p><p>That's all for now! I'd love to hear your thoughts and experiences with these new features. Your feedback not only enriches our shared knowledge but also helps in shaping our tech community. Here's to a year of great strides in technology, and to all of you, a fantastic year ahead!</p>