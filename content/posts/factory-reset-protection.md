---
title: "Factory Reset Protection: Secure your hardware"
date: 2023-01-28T15:47:25"
draft: false
tags: []
---

<p>A security feature called <strong>Factory Reset Protection (FRP)</strong> makes sure that if your phone is lost or stolen, it cannot be quickly reset by someone else. FRP has been a part of stock Android since Android Lollipop, which is automatically activated after you have added a Google account to Android. This is important since it makes a stolen phone more challenging, deterring someone from stealing a corporate device. The screen will show the message of signing in with the previous account synced on this mobile, making the phone useless.</p><hr><h2 id="how-does-it-work-and-why-should-you-use-it"><strong>How does it work, and why should you use it?</strong></h2><p>When you perform a Factory Data Reset, all settings are returned to the factory default settings. All data is erased, including files and downloaded apps.</p><p>If it's a personal Android phone, then can erasing it or doing a factory reset is a relatively simple task. You need to go to settings and initiate a full factory reset. On the other hand, for a corporate device, the option to allow/block a user to do a factory reset is controlled through MDM restrictions. However, a hard reset can still be performed if you have not configured FRP, and this is a risk of losing your corporate data and device. </p><p>If you have a Google account set up on the device, resetting it will require you to log in with your username and password. If you have multiple Google accounts set up on the device, you can log in with any of them. If an unauthorized person tries to reset the device by another method, the device would still require log-in in using the Google username and password. This means that if your device is lost or stolen, another person cannot reset it and use it.</p><p>There are various ways to bypass security measures to use a phone, but these methods are usually patched quickly. To legitimately use the phone, you will need to know the login information for the last account.</p><hr><h2 id="how-to-enable-factory-reset-protection">How to enable Factory Reset Protection</h2><p>Using Microsoft Intune, you can easily configure FRP in a few clicks. Steps as below:</p><ul><li>Create an Android device restrictions configuration profile.</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/02/image-1.png" class="kg-image" alt loading="lazy" width="1560" height="530" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-1.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-1.png 1000w, __GHOST_URL__/content/images/2023/02/image-1.png 1560w" sizes="(min-width: 720px) 720px"></figure><ul><li>Give it a name and description to suit the purpose.</li><li>Expand "<strong>General</strong>" and navigate to "<strong>Factory reset protection emails" </strong>configuration.</li></ul><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/02/image-2.png" class="kg-image" alt loading="lazy" width="874" height="105" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-2.png 600w, __GHOST_URL__/content/images/2023/02/image-2.png 874w" sizes="(min-width: 720px) 720px"><figcaption>Select <strong>Factory reset protection emails</strong></figcaption></figure><ul><li>Choose <strong>Google account email addresses</strong>. Enter the email addresses of device administrators that can unlock the device after it's wiped. Be sure to separate the email addresses with a semi-colon, such as <code>admin1@gmail.com;admin2@gmail.com</code>. </li></ul><blockquote>These emails only apply when a non-user factory reset is run, such as running a factory reset using the recovery menu.</blockquote><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/02/image-3.png" class="kg-image" alt loading="lazy" width="713" height="108" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-3.png 600w, __GHOST_URL__/content/images/2023/02/image-3.png 713w"><figcaption>Enter the email addresses of device administrator(s)</figcaption></figure><hr><h2 id="how-to-find-your-google-account-id">How to find your Google Account ID?</h2><p>Google Account ID refers to the 21-digit ID of your Google Account and if you are using Intune as MDM solution then you do not need th ID. However for other MDM solution, to enforce FRP you will need the Google account ID. To find your Google Account ID, head over to Google Developer page by following this <a href="https://developers.google.com/people/api/rest/v1/people/get?apix=true&amp;apix_params=%7B%22resourceName%22%3A%22people%2Fme%22%2C%22personFields%22%3A%22metadata%22%7D">link</a>.</p><ol><li>Under <strong>Request parameters</strong>, enter <strong>people/me </strong>under <strong>resourceName.</strong></li><li>Under <strong>personFields </strong>enter <strong>metadata</strong>.</li><li>Click on <strong>Execute</strong>.</li><li>Login using your Google Account.</li></ol><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/02/image-7.png" class="kg-image" alt loading="lazy" width="1337" height="836" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-7.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-7.png 1000w, __GHOST_URL__/content/images/2023/02/image-7.png 1337w" sizes="(min-width: 720px) 720px"></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/02/image-9.png" class="kg-image" alt loading="lazy" width="733" height="730" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-9.png 600w, __GHOST_URL__/content/images/2023/02/image-9.png 733w" sizes="(min-width: 720px) 720px"><figcaption>Consent for API access</figcaption></figure><p>The 21-digit ID corresponding to <strong><strong>id</strong></strong> under <strong><strong>application/json</strong></strong> is your Google Account ID.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/02/image-14.png" class="kg-image" alt loading="lazy" width="1406" height="877" srcset="__GHOST_URL__/content/images/size/w600/2023/02/image-14.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-14.png 1000w, __GHOST_URL__/content/images/2023/02/image-14.png 1406w" sizes="(min-width: 720px) 720px"><figcaption>Google ID : 21 digit id</figcaption></figure><hr><h2 id="caveat">Caveat!</h2><blockquote>Factory Reset Protection wonâ€™t work if the device wipe is authorized (for example,if you perform a device wipe from Settings &gt; Factory data reset). In such cases you may be able to skip Google Account verification during the set-up process.</blockquote><p>This behavior is expected. When you do a factory reset on the device through the <strong>Settings</strong> menu or you wipe the device from Intune in the Microsoft Endpoint Manager admin center, all your data is removed. This includes the Factory Reset Protection (FRP) data.</p><h3 id="solution">Solution</h3><p>The only way to do a factory reset on the device without losing the FRP data is through Recovery Mode. It is recommended that you set the <strong>Factory reset</strong> value to <strong>Block</strong> to prevent users from using the factory reset option in the device settings.</p><p>Then, use one of the following methods when you reset the device to the factory settings:</p><ul><li>Reset the device through Recovery mode.</li><li>Wipe the device from Intune when the device is in your possession and is expected to be reset for further use.</li></ul><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2023/02/image-18.png" class="kg-image" alt loading="lazy" width="306" height="493"><figcaption>FRP protection prompt</figcaption></figure><hr><h2 id="recovering-google-frp-locked-devices-using-kme">Recovering Google FRP locked devices using KME</h2><p>If you are using Samsung Knox devices and you are in a situation where you are unable to sign-in with the FRP Google account, then you can use the below steps to recover such locked devices:</p><blockquote>KME can only be used for Google FRP removal on devices utilizing Knox version 2.7.1 or above.</blockquote><p>Ensure the device is assigned a KME profile with the following options properly set:</p><ol><li>Verify <strong><strong>Skip Setup Wizard</strong></strong> is enabled for the profile. This setting is enabled by default for DO KME profiles, but must be manually enabled for DA KME profiles.</li><li>Ensure the user is not allowed to cancel enrollment (the <strong><strong>Allow end user to cancel enrollment</strong></strong> checkbox is unselected). This setting is disabled by default for DO KME profiles, but must be manually disabled for DA KME profiles.</li><li>Once the device is assigned a profile with the above settings, perform a hard factory reset using a combination of external button actions.</li><li>After the device powers on, connect to the network. You will be prompted for a reboot.</li><li>Perform the reboot. The enrollment will proceed without prompting for Google account login credentials.</li></ol><hr><h2 id="wrapping-up">Wrapping Up!</h2><p>Disabling FRP is easy. Most phones will do it automatically when you reset the data through the phone's settings. If your phone is a corporate phone with an additional layer of security then you'll need to disable that manually first!</p><p>If you try to reset a phone through the bootloader, FRP will kick in too, and it can't be set back up without the previous account's password.</p><p><strong>Factory Reset Protection (FRP)</strong> is an essential security method designed to ensure that someone can't just wipe and factory reset your corporate devices if they are lost or stolen. As such, which ever MDM solution you are using, you should always enforce this setting.</p><hr>