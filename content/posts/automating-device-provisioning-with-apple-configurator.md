---
title: "Automating Device Provisioning with Apple Configurator"
date: 2023-05-30T10:34:17"
draft: false
tags: []
---

<p>In my previous post, we unfolded the myriad announcements made during Apple's most recent Worldwide Developers Conference (WWDC 2023). We navigated through the torrent of innovations and technological advancements, focusing on how they promise to redefine the user experience. </p><p>In the last post, we discussed the latest development in macOS 14 and iOS/iPadOS 17.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="__GHOST_URL__/wwdc-2023-apples-leap-into-next-level-device-management-part-1/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">WWDC 2023: Appleâ€™s Leap into Next-Level Device Management - Part 1</div><div class="kg-bookmark-description">This yearâ€™s WWDC2023 was marked by numerous groundbreaking announcements. Yet, amid the buzz about the new Apple Vision Pro, iOS/iPadOS 17, macOS Sonoma, and app updates, Appleâ€™s leap into next-level device management is an understatement.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="__GHOST_URL__/content/images/size/w256h256/2023/01/admin-ajax.png" alt=""><span class="kg-bookmark-author">Intune - In Real Life</span><span class="kg-bookmark-publisher">Somesh Pathak</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://images.unsplash.com/photo-1503619609774-87677812b060?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=M3wxMTc3M3wwfDF8c2VhcmNofDl8fGFwcGxlJTIwZGV2ZWxvcG1lbnR8ZW58MHx8fHwxNjg3NTIwNzc2fDA&amp;ixlib=rb-4.0.3&amp;q=80&amp;w=2000" alt=""></div></a></figure><p>Till now, Apple Configurator has long been a staple for IT professionals managing iOS/iPadsOS &amp; macOS device with Apple School Manager or Apple Business Manager ecosystems. Traditionally, adding a new device to your organization involved a two-step process. First, the device had to be added into your organization. Then, someone with the role of Device Enrollment Manager would have to log in to the ABM portal to assign that device to the appropriate MDM server.</p><p>Excitingly, this year brings a significant update: Apple Configurator now enables automatic assignment of devices to your chosen MDM server directly within the tool itself. This streamlines the process and makes life a whole lot easier for IT administrators. </p><p>In this blog post, we're revisiting the Apple Configurator, but with a different lens. So, buckle up and join me as we traverse through the soon-to-be-released Apple Configurator features and see what Apple's commitment to continuous improvement has in store for us.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">ðŸ’¡</div><div class="kg-callout-text">The option to use Apple Configurator in the Shortcut app is yet to be released!&nbsp;</div></div><hr><h2 id="prerequisites">Prerequisites</h2><p>Before we dive in, make sure you have the following:</p><ol><li>Apple Configurator 2: This is available for free on the Mac App Store and is a tool designed to manage and deploy iOS devices in bulk.</li><li>A Mac computer: Apple Configurator 2, Automator, and Shortcuts all run on Mac systems.</li><li>Basic understanding of Apple's Automator and Shortcuts apps: These tools allow the automation of tasks on Apple's macOS and iOS platforms.</li></ol><hr><h2 id="what-is-apple-configurator">What is Apple Configurator?</h2><p>Apple Configurator is a free tool developed by Apple and available on the Mac App Store. This tool provides a way for administrators to mass-configure and deploy iPhone, iPad, and iPod touch devices in an organization or school. It is often used in environments where multiple iOS devices need to be quickly set up with specific settings and apps, such as in education or business settings.</p><p>Leveraging Automator and the actions available in Apple Configurator, you can design robust device management workflows through an easy drag-and-drop interface. These workflows can then be initiated from the system-wide Script Menu or just by starting an Automator workflow applet.</p><h2 id="what-is-automator">What is Automator?</h2><p>Automator is a powerful automation tool developed by Apple for macOS. It allows users to create custom workflows or applications by automating a series of tasks without the need for extensive programming knowledge. With Automator, users can streamline repetitive tasks, save time, and increase productivity.</p><p>Automator offers a visual interface where users can drag and drop pre-built actions to create a workflow. These actions can include various tasks such as manipulating files, launching applications, performing system actions, running scripts, interacting with web services, and much more.</p><p>The key components of Automator are:</p><ol><li><em><u>Actions</u></em>: Actions are pre-built modules that perform specific tasks. They can be combined to create a workflow. macOS provides a wide range of built-in actions, and additional actions can be added by third-party applications.</li><li><em><u>Variables</u></em>: Automator allows users to define and manipulate variables within a workflow. Variables can store data and values that can be used throughout the workflow.</li><li><em><u>Actions Library</u></em>: The Actions Library in Automator provides a categorized collection of actions that users can choose from to build their workflows. It includes actions for various applications, system functions, and utilities.</li><li><em><u>Workflow Building</u></em>: Using the drag-and-drop interface, users can create workflows by selecting actions from the Actions Library and arranging them in a logical order. Workflows can be as simple or as complex as needed, depending on the tasks to be automated.</li><li><em><u>Execution and Results</u></em>: Once a workflow is created, it can be executed directly from Automator or saved as an application or a service. Workflows can also be scheduled to run at specific times or triggered by specific events. The results of a workflow can be displayed, saved, or used as input for subsequent actions.</li></ol><p>Automator provides a user-friendly approach to automation, allowing users to simplify complex tasks and create personalized solutions tailored to their needs. It is a powerful tool for automating repetitive actions, boosting productivity, and enhancing the overall macOS user experience.</p><p>To understand &amp; learn more about the capabilities and features of Automator &amp; Shortcuts you can refer to the below links:</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://support.apple.com/guide/automator/welcome/mac"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Automator User Guide for Mac</div><div class="kg-bookmark-description">Learn how to use Automator on your Mac to automate much of what you do on your computer.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://support.apple.com/favicon.ico" alt=""><span class="kg-bookmark-author">Apple Support</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://help.apple.com/assets/61E87B255FBFB2628709732E/61E87B275FBFB26287097336/en_US/573f95d708cbb258343f5c78cc439bcb.png" alt=""></div></a></figure><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://support.apple.com/guide/shortcuts-mac/welcome/mac"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Shortcuts User Guide for Mac</div><div class="kg-bookmark-description"></div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://support.apple.com/favicon.ico" alt=""><span class="kg-bookmark-author">Apple Support</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://help.apple.com/assets/63A24242BFFB1C67B5512B26/63A24244BFFB1C67B5512B2E/en_US/8c93d4a4c79a589889cfaf80c5f61598.png" alt=""></div></a></figure><p>Now, let's get back to designing the workflow.</p><hr><h2 id="create-a-supervision-identity-for-apple-configurator">Create a Supervision Identity for Apple Configurator</h2><p>To incorporate your organization's information into devices, generating a supervision identity is necessary. This ensures that the information is prominently displayed to users. Subsequently, securely configuring devices involves adding these supervision identities to other workstations running Apple Configurator 2.</p><ul><li>Launch <strong>Apple Configurator 2 </strong>and navigate to<strong>  Settings.</strong></li><li>Select <strong>Organizations.</strong></li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-21.png" class="kg-image" alt="" loading="lazy" width="1998" height="1254" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-21.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-21.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-21.png 1600w, __GHOST_URL__/content/images/2023/09/image-21.png 1998w" sizes="(min-width: 720px) 720px"></figure><ul><li>Select the <strong>+</strong> action button.</li><li>Follow the prompts to create a new supervision identity. Select <strong>Done.</strong></li><li>Select the <strong>Elipses</strong> button in the <strong>Organizations</strong> window.</li><li>Select <strong>Export Supervision Identity</strong> and choose where to save it. Select Save.</li><li>Add a <strong>Password</strong> to the identity. This .p12 file will be uploaded to the UEM console when creating a Device Enrollment Program profile.</li></ul><hr><h2 id="design-the-workflow">Design the Workflow</h2><p>The user has three options to choose from for assigning devices; don't assign to an MDM server, assign to the default MDM server configured for its type, for example Mac or iPad, or assign to one of the organization's MDM servers. The list of available MDM servers is provided automatically after the user signs in with their Managed Apple ID.</p><p>Initiating any workflow requires pinpointing the components that will be subjected to the workflow. When it comes to the Apple Configurator, the components to be processed are the iOS devices that are linked with your computer. This marks the primary phase in the development of the workflow.</p><p>The collection of Automator actions within Apple Configurator includes two specific actions designed to specify which devices will be managed by a given workflow: </p><ul><li>Find Connected Devices</li><li>Find Connected Devices from Input</li></ul><p><strong>Find Connected Devices:</strong></p><p>The 'Find Connected Devices' action retrieves the unique ECID identifiers of all connected iOS devices that have been selected via their corresponding checkboxes within the action's interface. These ECID identifiers are then passed on to subsequent actions in the workflow, helping to identify which devices will undergo the designated processes.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-22.png" class="kg-image" alt="" loading="lazy" width="2000" height="1357" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-22.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-22.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-22.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/09/image-22.png 2400w" sizes="(min-width: 720px) 720px"></figure><p><br><strong>Erase Devices:</strong></p><p>The 'Erase Devices' action serves the purpose of wiping both the content and settings from devices that are under supervision. This means that all user data, applications, and configurations will be removed, essentially restoring the supervised device to its factory settings.  It ensures that sensitive information is completely erased, providing an extra layer of security and peace of mind.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-23.png" class="kg-image" alt="" loading="lazy" width="2000" height="1357" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-23.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-23.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-23.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/09/image-23.png 2400w" sizes="(min-width: 720px) 720px"></figure><p><strong>Update Devices</strong>:</p><p>Its primary function is to update the devices for their next phase of operationâ€”i.e. updating the OS version to the latest stable release. Essentially, this action acts as a transitional stage, reconfiguring the devices into a receptive state so they can be efficiently managed or deployed.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-24.png" class="kg-image" alt="" loading="lazy" width="2000" height="1357" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-24.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-24.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-24.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/09/image-24.png 2400w" sizes="(min-width: 720px) 720px"></figure><p><strong>Prepare Devices:</strong></p><p>The 'Prepare Devices' action is strategically positioned in the workflow after the 'Update Devices' or 'Erase Devices' actions. Its role is to set up the devices for their next phase of operation, whether that involves installing apps, transferring documents, or simply making them ready for immediate use. By doing so, it ensures a seamless transition, enabling the devices to move from a 'clean slate' status to a fully operational state. This action is integral for IT administrators who need to efficiently manage device configurations, especially when transitioning devices between different users or operational states.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-25.png" class="kg-image" alt="" loading="lazy" width="2000" height="1357" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-25.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-25.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-25.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/09/image-25.png 2400w" sizes="(min-width: 720px) 720px"></figure><p><strong>Set variable:</strong></p><p>This step creates a variable called <code>all-UDIDs</code> that contains a list of all of the UDIDs of the connected devices. The UDID is a unique identifier for each iOS device.</p><p>This variable will be used in the next step to update the MDM records for each device.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-26.png" class="kg-image" alt="" loading="lazy" width="1826" height="1296" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-26.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-26.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-26.png 1600w, __GHOST_URL__/content/images/2023/09/image-26.png 1826w" sizes="(min-width: 720px) 720px"></figure><p><strong>Repeat with each item in all-UDIDs:</strong></p><p>This step repeats the following steps for each UDID in the <code>all-UDIDs</code> variable:</p><ul><li><strong><em>Set variable current-UDID to Repeat Item:</em></strong>&nbsp;This step creates a variable called&nbsp;<code>current-UDID</code>&nbsp;that contains the current UDID from the&nbsp;<code>all-UDIDs</code>variable.</li><li><strong><em>Comment:</em></strong>&nbsp;This step adds a comment to the script. The comment is used to explain what the script is doing.</li><li><strong>Match serial number to asset tag and update MDM records:</strong>&nbsp;This step matches the serial number of the device to the asset tag spreadsheet and updates the MDM records accordingly. This is necessary because the MDM records may not have the asset tag information.</li><li><strong>Run Shell Script:</strong>&nbsp;This step runs the shell script that is specified in the&nbsp;<code>Input:</code>&nbsp;field. The shell script is used to extract the asset tag from the asset tag spreadsheet.</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2023/09/image-27.png" class="kg-image" alt="" loading="lazy" width="1838" height="1542" srcset="__GHOST_URL__/content/images/size/w600/2023/09/image-27.png 600w, __GHOST_URL__/content/images/size/w1000/2023/09/image-27.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/09/image-27.png 1600w, __GHOST_URL__/content/images/2023/09/image-27.png 1838w" sizes="(min-width: 720px) 720px"></figure><p>The shell script will now be executed. The script will search the asset tag spreadsheet for the serial number of the device and extract the asset tag. The asset tag will then be used to update the MDM records for the device.</p><p>In this step, the <code>grep</code> command is used to search the asset tag spreadsheet for the serial number of the device and to extract the asset tag. The <code>grep</code> command will search for lines in the asset tag spreadsheet that start with the pattern "Serial Number"</p><p>Once the shell script has finished running, the variable <code>Asset Tag</code> will contain the asset tag for the current device. You can then use this variable to update the MDM records for the device.</p><p>Once done, the shortcut updates the MDM server with the asset tag number from a separate csv file.</p><h3 id="advanced-automation-techniques"><strong>Advanced Automation Techniques</strong></h3><p>The 'Install Configuration Profile' allows you to auto-assign configuration profiles stored in your Intune tenant. Beyond that, you can also automatically deploy apps according to the defined profiles or requirements.</p><hr><h2 id="concluding-thoughts">Concluding Thoughts!</h2><p>Remember the days when device provisioning felt like a chore? IT administrators had to go through a tedious process of manually configuring each device and then assigning it to an MDM server through Apple Business Manager. Those days are officially behind us.</p><p>The new automation capabilities within Apple Configurator have streamlined this entire operation. This level of automation not only saves valuable time but also reduces the risk of human error, enhancing the overall efficiency and security of your device management endeavors.</p>