---
title: "MacOS Managed Local Accounts: Friend or Foe? (With a New Friend in Town!)"
date: 2024-02-16T12:51:25"
draft: false
tags: []
---

<p>The world of managing Macs just got a whole lot friendlier (or potentially foe-ish?) with the introduction of a new exciting feature: <strong>Managed Local Accounts</strong>. Announced at WWDC 2023 and released in Intune today with service release 2402, these features promise to revolutionize the way you handle Mac enrollment and administration. But before you jump in headfirst, let's explore their potential impact from both sides of the coin.</p><h3 id="friend-managed-local-accounts"><strong>Friend: Managed Local Accounts</strong></h3><p>Say goodbye to the hassle of individual user accounts and hello to streamlined management! Managed Local Accounts allow you to pre-configure local accounts directly through Intune admin center. This means:</p><ul><li><strong>Simplified deployment:</strong>&nbsp;No more manual setup for each user.&nbsp;Assign pre-configured accounts instantly.</li><li><strong>Enhanced security:</strong>&nbsp;Lmit privileges,&nbsp;and enforce other policies remotely.</li><li><strong>Improved control:</strong>&nbsp;Manage account configured effortlessly.</li></ul><h3 id="foe-managed-local-accounts"><strong>Foe: Managed Local Accounts</strong></h3><p>While the benefits are undeniable, some things to consider are:</p><ul><li><strong>Limited User Privileges</strong>: User account ms created as standard user accounts lack admin rights,&nbsp;which can hinder tasks requiring elevated permissions like installing software or modifying system settings.&nbsp;As the Mac management ecosystem is still evolving, this can create friction for users and potentially require IT intervention for routine tasks.</li><li><strong>No Official LAPS Equivalent:</strong> macOS doesn't have a built-in tool like Microsoft's LAPS for centrally managing local admin passwords.&nbsp;This means more complex password management and potential security risks if credentials aren't rotated regularly.</li><li><strong>View-Only Remote Support:</strong> While Intune offers remote access to devices,it's  limited to viewing the screen without interaction.&nbsp;This makes troubleshooting and assisting users more challenging,&nbsp;especially for issues requiring admin privileges.</li></ul><h3 id="new-friend-alert-await-final-configuration"><strong>New Friend Alert: Await Final Configuration</strong></h3><p>Joining the party is <strong>Await Final Configuration</strong>, a feature that releases the device to deaktop only when all the configurations and restrictions from Intune are applied installed/configured on the device. This means:</p><ul><li><strong>Enhnaced security:</strong> Setup Assistant will only release the device to deaktop once all configurations are installed before allowing user the access to the device.</li><li><strong>Enhanced user experience deployment:</strong>&nbsp;User access the device which is fully configured and secured with all settings/configurations.</li></ul><hr><h2 id="decoding-the-friend-diving-deep-into-managed-local-accounts"><strong>Decoding the Friend: Diving Deep into Managed Local Accounts</strong></h2><p>Now that we've introduced the dynamic duo of Managed Local Accounts and Await Final Configuration, let's delve deeper into the friend, Managed Local Accounts, and understand it before tackling its partner.</p><h3 id="understanding-the-command"><strong>Understanding the Command:</strong></h3><p>The magic behind Managed Local Accounts lies in the <strong>AccountConfigurationCommand</strong>, which is pushed via Intune. This command enables Intune to remotely create and configure local accounts on macOS devices enrolled. </p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2024/02/image-5.png" class="kg-image" alt="" loading="lazy" width="1569" height="908" srcset="__GHOST_URL__/content/images/size/w600/2024/02/image-5.png 600w, __GHOST_URL__/content/images/size/w1000/2024/02/image-5.png 1000w, __GHOST_URL__/content/images/2024/02/image-5.png 1569w" sizes="(min-width: 720px) 720px"></figure><p>Here's a breakdown of the key elements involved in the AccountConfigurationCommand:</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2024/02/image-6.png" class="kg-image" alt="" loading="lazy" width="1644" height="1098" srcset="__GHOST_URL__/content/images/size/w600/2024/02/image-6.png 600w, __GHOST_URL__/content/images/size/w1000/2024/02/image-6.png 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/image-6.png 1600w, __GHOST_URL__/content/images/2024/02/image-6.png 1644w" sizes="(min-width: 720px) 720px"></figure><hr><h2 id="the-final-stretch-the-waiting-room"><strong>The Final Stretch: The Waiting Room</strong></h2><p>Now that we've explored power of Managed Local Accounts. Let's also understand: <strong>How the devices is released from the "waiting room" once everything is configured?</strong> This is where the <code>ReleaseDeviceFromAwaitConfiguration</code> command comes in, playing a crucial role in the final act of the Mac enrollment.</p><p>Await Final Configuration holds the device's desktop until it applies all the  required policies and settings through the MDM solution. While it offers great control, users might experience a delay before accessing their devices. This is where <code>ReleaseDeviceFromAwaitConfiguration</code> steps in, allowing you to signal "showtime!" when everything is ready.</p><p>The MDM send the command to inform a device that it can allow the user to continue in Setup Assistant.</p><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Command&lt;/key&gt;
    &lt;dict&gt;
        &lt;key&gt;RequestType&lt;/key&gt;
        &lt;string&gt;DeviceConfigured&lt;/string&gt;
    &lt;/dict&gt;
    &lt;key&gt;CommandUUID&lt;/key&gt;
    &lt;string&gt;0001_DeviceConfigured&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</code></pre><p>And when all the policies and settings are applied successfully, the device sends back a response to MDM to acknowledge.</p><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;CommandUUID&lt;/key&gt;
    &lt;string&gt;0001_DeviceConfigured&lt;/string&gt;
    &lt;key&gt;Status&lt;/key&gt;
    &lt;string&gt;Acknowledged&lt;/string&gt;
    &lt;key&gt;UDID&lt;/key&gt;
    &lt;string&gt;00008020-000915083C80012E&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</code></pre><p>So it's like, you've carefully prepared the stage with Managed Local Accounts and added the finishing touches with Await Final Configuration. Now, <code>ReleaseDeviceFromAwaitConfiguration</code> raises the curtain, granting users access to their fully equipped and secure workspace.</p><hr><h2 id="intune-configuration"><strong>Intune Configuration</strong></h2><ul><li>In the&nbsp;Intune admin center, go to&nbsp;<strong>Devices</strong>&nbsp;&gt;&nbsp;<strong>Enrollment</strong>.</li><li>Select the&nbsp;<strong>Apple</strong>&nbsp;tab.</li><li>Under&nbsp;<strong>Bulk Enrollment Methods</strong>, select&nbsp;<strong>Enrollment program tokens</strong>.</li><li>Select an enrollment program token.</li><li>Select&nbsp;<strong>Profiles</strong>&nbsp;&gt;&nbsp;<strong>Create profile</strong>&nbsp;&gt;&nbsp;<strong>macOS</strong></li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2024/02/image-8.png" class="kg-image" alt="" loading="lazy" width="1412" height="475" srcset="__GHOST_URL__/content/images/size/w600/2024/02/image-8.png 600w, __GHOST_URL__/content/images/size/w1000/2024/02/image-8.png 1000w, __GHOST_URL__/content/images/2024/02/image-8.png 1412w" sizes="(min-width: 720px) 720px"></figure><ul><li>Enter a name and description for the profile so that you can distinguish it from other enrollment profiles.</li><li>On the&nbsp;<strong>Management Settings</strong>&nbsp;page, configure&nbsp;<strong>Enrol with User Affinity &amp; Modern Authentication.</strong></li></ul><div class="kg-card kg-callout-card kg-callout-card-blue"><div class="kg-callout-emoji">ðŸ’¡</div><div class="kg-callout-text">Await Final Configuration &amp; Managed Local Accounts can only be used with User Affinity &amp; Modern Authentication.</div></div><ul><li>Toggle "Yes" for Await Final Configuration and click Next</li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2024/02/image-9.png" class="kg-image" alt="" loading="lazy" width="1618" height="755" srcset="__GHOST_URL__/content/images/size/w600/2024/02/image-9.png 600w, __GHOST_URL__/content/images/size/w1000/2024/02/image-9.png 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/image-9.png 1600w, __GHOST_URL__/content/images/2024/02/image-9.png 1618w" sizes="(min-width: 720px) 720px"></figure><ul><li>On the&nbsp;<strong>Setup Assistant</strong>&nbsp;page, configure the Setup Assistant experience as per your organisation requirements.</li><li>On the Account Settings page, Select <strong>Yes </strong>to create local managed account during enrollment. </li></ul><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2024/02/image-10.png" class="kg-image" alt="" loading="lazy" width="1583" height="1117" srcset="__GHOST_URL__/content/images/size/w600/2024/02/image-10.png 600w, __GHOST_URL__/content/images/size/w1000/2024/02/image-10.png 1000w, __GHOST_URL__/content/images/2024/02/image-10.png 1583w" sizes="(min-width: 720px) 720px"></figure><ul><li>Toggle "Yes" for blocking users to change their username details.</li><li>Review changes and click <strong>Create</strong>&nbsp;to finish creating the profile.</li></ul><hr><h2 id="end-user-experience"><strong>End User </strong>Experience</h2><h2 id=""></h2><figure class="kg-card kg-gallery-card kg-width-wide"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/1.JPG" width="2000" height="1125" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/1.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/1.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/1.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/1.JPG 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/2.JPG" width="2000" height="1125" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/2.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/2.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/2.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/2.JPG 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/3.JPG" width="2000" height="1125" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/3.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/3.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/3.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/3.JPG 2400w" sizes="(min-width: 720px) 720px"></div></div><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/4.JPG" width="2000" height="1500" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/4.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/4.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/4.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/4.JPG 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/5.JPG" width="2000" height="1500" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/5.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/5.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/5.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/5.JPG 2400w" sizes="(min-width: 720px) 720px"></div></div><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/6.JPG" width="2000" height="1500" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/6.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/6.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/6.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/6.JPG 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="__GHOST_URL__/content/images/2024/02/7.JPG" width="2000" height="2667" loading="lazy" alt="" srcset="__GHOST_URL__/content/images/size/w600/2024/02/7.JPG 600w, __GHOST_URL__/content/images/size/w1000/2024/02/7.JPG 1000w, __GHOST_URL__/content/images/size/w1600/2024/02/7.JPG 1600w, __GHOST_URL__/content/images/size/w2400/2024/02/7.JPG 2400w" sizes="(min-width: 720px) 720px"></div></div></div></figure><hr><h2 id="conclusion"><strong>Conclusion</strong></h2><p>Managed Local Accounts offer exciting possibilities for revolutionizing your Mac management landscape. Carefully weigh the benefits and considerations against your specific needs and environment. Remember, understanding your IT needs &amp; impact of these features on end user impact is key to making informed decisions that empower your organization and users alike.</p><p>Stay tuned for the next blog, where I will take you the backstage where all this magic happens. The deep dive into backend process. Till then keep Mac-ing ðŸ˜„</p>